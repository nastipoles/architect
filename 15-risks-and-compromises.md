# 10. Анализ рисков созданной архитектуры, компромиссов


| Риск                                        | Описание                                                                                                                                                                                                                                                                                                                  | Компромисс / Причина                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Меры снижения                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|---------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Сложность DevOps / микросервисной архитектуры | Микросервисы в Kubernetes требуют продвинутых навыков, настройки CI/CD, мониторинга, логирования. Если команда не имеет достаточного опыта, велик риск ошибок конфигурации, проблем с производительностью и стабильностью                                                                                     | + Позволяют независимо развивать и масштабировать сервисы. • Внедрить корпоративные стандарты DevOps + Легче внедрять новые функции. • Обучать команду Kubernetes, микросервисам. — Нужно развивать культуру DevOps, грамотную оркестрацию, наблюдаемость. • Регулярные ревью архитектуры, чтобы не плодить лишние сервисы • Использовать единый подход к сетевым политикам                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| RabbitMQ как точка отказа                   | При массовых мероприятиях вся социальная и геймификационная активность зависит от надежности брокера. Если брокер «захлёбывается» или падает, события не доставляются, функционал зависает                                                                                                                     | + Асинхронность снижает пиковые нагрузки, даёт масштабирование. • Развернуть брокер в кластерном режиме                                                                                                                                                                                                                                                                                                                                                                      | • Настроить алертинг на задержки, метрики обработки — Увеличивается сложность отладки, риск потерь/дубликатов сообщений, необходимость мониторинга очередей. • Согласовать схемы событий • Регулярно проверять сценарии сбоя                                                                                                                                                                                                                                                                                           |
| SQL-базы при больших объемах                | Все данные (тренировки, посты, комментарии, заказы) хранятся в реляционной БД. При взрывном росте объёмов или запросов SQL может стать узким местом                                                                                                                             | + ACID, удобство работы, привычное SQL-сообщество. • Использовать кластер PostgreSQL + Хорошая поддержка транзакций • Применять секционирование таблиц при необходимости. — Для огромных объемов NoSQL иногда проще.                                                                                                                                                                                                                                                 | • Разнести схемы/базы при особо крупных данных — Возможно усложнение при горизонтальном масштабировании • Запланировать откат на NoSQL для очень больших соц. объемов                                                                                                                                                                                                                                                                                                                                     |
| Высокая стоимость HA (доступности)          | Поддержание SLA 99.9+% требует резервных кластеров, распределенных регионов, постоянный мониторинг и быструю реакцию на инциденты. Это увеличивает расходы на инфраструктуру и команду                                                                                 | + Гарантия стабильной работы при массовых нагрузках, без сбоев                                                                                                                                                                                                                                                                                                                                                                                                              | • Выделить и зафиксировать SLA — Повышенные затраты на облако, DevOps, инструменты. иногда перерасход бюджетов. • Использовать сервисы облака для упрощения • Регулярные тесты                                                                                                                                                                                                                                                                                                                                 |
| Keycloak как внешняя критическая точка      | Если Keycloak недоступен, пользователи не могут аутентифицироваться. При неправильной конфигурации — дырки в безопасности. Нужно администрирование, учёт обновлений, мейджор-релизов.                                                                               | + Экономия усилий на самописной аутентификации. • Разворачивать Keycloak в режиме HA (несколько нод). + Готовые механизмы OAuth2, SSO, интеграция соцсетей.                                                                                                                                                                                                                                                | • Настроить мониторинг работоспособности IdP. — Зависимость от внешнего модуля, учет новой компетенции/роли безопасника • Настроить резервные копии • Обучить команду Keycloak, регулярно проверять обновления и уязвимости.                                                                                                                                                                                                                                                                               |
| Мультирегиональность                         | При выходе на новые рынки (Европа, Азия) возникает сложность сетевых связей, соблюдения законов, возможен рост латентности и затрат на синхронизацию между регионами                                                                              | + Возможность обслуживать пользователей ближе к месту проживания (меньше задержек), удерживать глобальные соревнования. • Начинать с 1–2 регионов, масштабировать по мере необходимости.                                                                                                                                                                                                                   | — Усложнение DevOps, сетевых настроек, соблюдения локальных законов по хранению данных • Четкое планирование разнесения данных • Консультация с локальными юристами                                                                                                                                                                                                                                                                                                                                     |
| Безопасность и соответствие GDPR            | Хранятся персональные данные (здоровье, геолокация, транзакции). Возможны штрафы и имиджевые потери при утечках. Нужно обеспечить шифрование, аудит                                                                                                                      | + Сильный плюс для бренда (конфиденциальность), доверие пользователей • шифрование в базе, доступ по ролям                                                                                                                                                                                                                                                                                                                                                               | — Дополнительные усилия на шифрование (реализацию процессов удаления/экспорта, аудит логов, управление согласиями) • Логировать доступ к персональным данным • Политика удаления/анонимизации аккаунтов. • Регулярное сканирование уязвимостей                                                                                                                                                                                                                                                     |
| Непредсказуемость изменений со стороны бизнеса | Требования к новым видам спорта, новым челленджам, интеграциям могут резко меняться                                                                                                                                                                                        | + Микросервисы позволяют относительно легко добавлять сервисы и фичи. • Agile-подход                                                                                                                                                                                                                                                                                                                                                                                       | — Любые глобальные изменения все равно требуют координации (события, контракты, схемы). • Нотация API-контрактов (OpenAPI) • Поддержка версионирования API • Использовать включение/выключение функционала.                                                                                                                                                                                                                                                                                                   |
